---
title: 数据库事务
date: 2020-02-15 13:18:28
categories: 数据库
tags: mysql
---

数据库事务级别依次由低到高有：
- 读未提交
- 读已提交
- 可重复读
- 序列化
mysql默认隔离级别是可重复读

不同事务级别带来的问题，主要是同一事务内多次读取的内容不一致问题
<br>
- 脏读：事务A中，读取到另一个事务B未提交的内容，然后事务B回滚，导致事务A读取的数据为脏数据。
事务A读取了内容C，事务B更新了内容C但是未提交，事务A又一次读取内容C，但是内容C改变，两次读取内容不一致。
- 不可重复读：事务A多次读取同一数据，事务B在事务A多次读取过程中，对数据进行了更新并提交，导致
事务A多次读取同一数据，但结果不一致。
- 幻读：事务A读取了表内所有行，事务B新增了一行，A再次读取时发现两次结果不一致，多了一行。

小结：不可重复读的和幻读很容易混淆，不可重复读侧重于修改，幻读侧重于新增或删除。解决不可重复读的问题只需锁住满足条件的行，解决幻读需要锁表