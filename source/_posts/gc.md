---
title: gc
date: 2019-12-05 09:42:57
categories: Java
---

### 判断对象是否存活，可以使用引用计数器或者可达性分析两种方法。
引用计数器：
当引用计数器为零的时候，表明没用引用再指向该对象，但是引用计数器不能解决循环引用的情况；
可达性分析：
1. 当不能从GC Root寻找一条路径到达该对象时， 将进行第一次标记。
2. 第一次标记后检查对象是否重写了finalize() 和是否已经被调用了finalize()方法。若没有重写finalize()方法或已经被调用，则进行回收。
3. 在已经重写finalize()方法且未调用的情况下，将对象加入一个F-Queue 的队列中，稍后进行第二次检查。
4. 在第二次标记之前，对象如果执行finalize()方法并完成自救，对象则不会被回收。否则完成第二次标记，进行回收。值得注意的是finalize()方法并不可靠。